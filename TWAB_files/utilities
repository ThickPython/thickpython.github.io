function arrayFirstIndexOf(n,t,i){for(var u=n.length,r=0,f=u;r<f;r++)if(t.call(i,n[r]))return r;return-1}function setSelectMenuWidth(){var n=$(".select");n.each(function(){var n=$(this),t=n.width(),i=n.find(".options").width();i>t&&(n.width(t+i),n.find(".options").css("width","100%"))})}var __extends,removeByAttr,customAlert,customAlert_forActions,mediaLightBox,UtilityOld,Bnet;(function(n){var t;(function(t){var i=function(){function t(){}return t.loadUrl=function(t,i,r,u){u===void 0&&(u=null);var e="useCache"in t?t.useCache:n.Site.PageController.Instance.useCache,f=$.ajax({url:t.url,cache:e,type:"GET",success:i,error:r});return u&&f.done(function(){return u()}),f},t.loadUrlGetElement=function(t,i,r,u){r===void 0&&(r=null);u===void 0&&(u=null);var f=t.elementSelectors,e=typeof f=="string"?[f]:f,o=r?r:function(){return n.Site.PageController.Instance.redirect(t.url)};return this.loadUrl(t,function(n){var f=$(n),r,u;t.changeTitle&&(r=n.match(/<title>(.*)<\/title>/),r&&(u=$("<div/>").html(r[1]).text(),$("title").text(u)));var o=e.map(function(n){return f.find(n)}),s=$(o).map(function(n,t){return $(t).toArray()}),h=$("<div/>").append(s);i(h)},o,u)},t}();t.Ajax=i})(t=n.Utilities||(n.Utilities={}))})(Bnet||(Bnet={})),function(n){var t;(function(n){var t=function(){function n(){}return n.toString=function(t){return n.toTimestamp(t)},n.toTimestamp=function(n,t,i){var e;t===void 0&&(t=7);i===void 0&&(i=null);var r=moment(n),u=r.fromNow(),o=moment(),s=moment.duration(r.diff(o)),f=Math.abs(s.asDays());return f>t&&(e=f>364?"MMM DD, YYYY":"MMM DD",u=r.format(i||e)),u},n.toTimestampFull=function(n){var t=this.timestampToMoment(n).local();return Localizer.Format(Localizer.Time.monthabbrdayyearhourminute,{monthabbr:t.format("MMM"),day:t.format("Do"),hour12:t.format("h"),hour24:t.format("H"),minute:t.format("MM"),ampm:t.format("a"),year:t.format("YYYY")})},n.toTimestampFullCompact=function(n){var t=this.timestampToMoment(n).local();return Localizer.Format(Localizer.Time.compactmonthdayyearhourminute,{monthabbr:t.format("MMM"),month:t.format("M"),day:t.format("D"),hour12:t.format("h"),hour24:t.format("H"),minute:t.format("mm"),ampm:t.format("a"),year:t.format("YYYY")})},n.timeAgo=function(n){var t=this.timestampToMoment(n).local(),i=moment().subtract(7,"days"),r=moment().subtract(365,"days");return t.isBefore(r)?Localizer.Format(Localizer.Time.monthabbrdayyearhourminute,{monthabbr:t.format("MMM"),day:t.format("Do"),hour12:t.format("h"),hour24:t.format("H"),minute:t.format("MM"),ampm:t.format("a"),year:t.format("YYYY")}):t.isBefore(i)?Localizer.Format(Localizer.Time.monthabbrdayhourminute,{monthabbr:t.format("MMM"),day:t.format("Do"),hour12:t.format("h"),hour24:t.format("H"),minute:t.format("MM"),ampm:t.format("a")}):t.fromNow()},n.timestampToMoment=function(n){return moment(n,undefined,"en").locale(Localizer.CurrentCultureName)},n.localizeTimesToCorrectTimezone=function(n){var r=new Date,t=r.getTimezoneOffset(),i=moment.utc(n);return t>0?i.subtract(t,"minutes"):i.add(t,"minutes")},n}();n.DateTime=t})(t=n.Utilities||(n.Utilities={}))}(Bnet||(Bnet={})),function(n){var t;(function(n){var t=function(){function n(){}return n.firstIndexOf=function(n,t){for(var i=0;i<n.length;i++)if(t(n[i]))return i;return-1},n.any=function(n,t){var i=!1;return this.foreach(n,function(n){t(n)&&(i=!0)}),i},n.select=function(n,t){var i=[];return this.foreach(n,function(n){i.push(t(n))}),i},n.where=function(n,t){var i=[];return this.foreach(n,function(n){t(n)&&i.push(n)}),i},n.firstOrDefault=function(n,t){var i=this.where(n,t);return i&&i.length>0?i[0]:null},n.intersection=function(n,t){var i;return n.length>t.length&&(i=[n,t],t=i[0],n=i[1]),n.filter(function(n){return t.indexOf(n)!==-1?!0:!1})},n.foreach=function(n,t){var i,e,r,u,f;if(n instanceof Array)for(i=0,e=n.length;i<e;i++)t(n[i],i);else for(r=0,u=Object.keys(n);r<u.length;r++)f=u[r],n.hasOwnProperty(f)&&t(n[f])},n.unique=function(n){for(var t,r=[],u=[],f=n.length,e=0,i=0;i<f;i++)t=n[i],r.indexOf(t)<0&&(r.push(t),u[e++]=t);return u},n}();n.Enumerable=t})(t=n.Utilities||(n.Utilities={}))}(Bnet||(Bnet={})),function(n){var t;(function(n){var t=function(){function n(){}return n.getOuterHtml=function(n){return n[0].outerHTML},n.placeholderLocFix=function(n){n===void 0&&(n=$("input[data-placeholder]"));n.each(function(n,t){var i=$(t);i.is("[data-placeholder]")&&i.attr("placeholder",i.attr("data-placeholder"))})},n.encodeHTML=function(n){return $("<div />").text(n).html()},n.decodeHTML=function(n){var t=document.createElement("div");return t.innerHTML=n,t.childNodes.length===0?"":t.childNodes[0].nodeValue},n}();n.Html=t})(t=n.Utilities||(n.Utilities={}))}(Bnet||(Bnet={})),function(n){var t;(function(n){var t=function(){function n(){}return n.AddToSystemCalendar=function(t){var i=n.Instance,r=i.GenerateICSString(t);console.log(r);i.DownloadICS(r)},n.GenerateStartEndDateString=function(n){var t=moment(n),i=t.seconds(0).milliseconds(0).toISOString().replace(/\W/g,""),r=t.add(1,"hours").seconds(0).milliseconds(0).toISOString().replace(/\W/g,"");return(i+"/"+r).replace(/000Z/g,"Z")},n.AddGoogleEvent=function(n){window.open("http://www.google.com/calendar/event?action=TEMPLATE&text="+n.title+"&dates="+n.startendString+"&location=location&details="+n.summary+"&trp=false&sprop="+n.calendarLink.url+"&sprop=name:"+n.calendarLink.name)},n.AddYahooEvent=function(){window.open("https://www.google.com/calendar/render?action=TEMPLATE&text=Fireteam&dates=20140127T224000Z&details=For+details,+link+here:+http://www.example.com&sf=true&output=xml")},n.prototype.DownloadICS=function(n){window.open("data:text/calendar;charset=utf8,"+escape(n))},n.prototype.GenerateICSString=function(n){var t=n.start.replace(/000Z/g,"Z"),i=n.start.split("T")[0];return"BEGIN:VCALENDAR\nVERSION:2.0\nMETHOD:PUBLISH\nBEGIN:VEVENT\nSUMMARY:"+n.summary+"\nUID:"+(n.start+n.summary)+"\nDTSTART:"+t+"\nURL:"+n.url+"\nEND:VEVENT\nEND:VCALENDAR"},n.Instance=new n,n}();n.AddToCalendar=t})(t=n.Utilities||(n.Utilities={}))}(Bnet||(Bnet={})),function(n){var t;(function(n){n[n.Backspace=8]="Backspace";n[n.Tab=9]="Tab";n[n.Enter=13]="Enter";n[n.Shift=16]="Shift";n[n.Ctrl=17]="Ctrl";n[n.Alt=18]="Alt";n[n.Escape=27]="Escape";n[n.Space=32]="Space";n[n.LeftArrow=37]="LeftArrow";n[n.UpArrow=38]="UpArrow";n[n.RightArrow=39]="RightArrow";n[n.DownArrow=40]="DownArrow"})(t=n.Key||(n.Key={}))}(Bnet||(Bnet={})),function(n){var t;(function(n){var t=function(){function n(){}return n.delayCallbackAfterInput=function(n,t,i){var r=this;i===void 0&&(i=200);n in this.delays&&clearTimeout(this.delays[n]);this.delays[n]=setTimeout(function(){t();delete r.delays[n]},i)},n.copyStringToClipboard=function(n){var t=document.createElement("input");document.body.appendChild(t);t.value=n;this.selectTextFromInput(t);document.execCommand("copy",!1);t.remove()},n.selectTextFromInput=function(n){var t,i;Modernizr.safari?(t=document.createRange(),t.selectNodeContents(n),i=window.getSelection(),i.removeAllRanges(),i.addRange(t),n.setSelectionRange(0,999999)):n.select()},n.delays={},n}();n.Input=t})(t=n.Utilities||(n.Utilities={}))}(Bnet||(Bnet={})),function(n){var t;(function(t){var i=function(){function t(){}return t.Alert=function(t,i){var u=t,r;return typeof t=="object"&&"errorMessage"in t&&(u=t.errorMessage),r=new n.Modal(i||"alert",u),r.includeCloseButton=!1,r.open(),r},t.Error=function(t){var i=new n.ErrorModal("ErrorModal",t);return i.open(),i},t.Confirm=function(t,i,r,u,f){u===void 0&&(u=function(){});var e=new n.ConfirmationModal(f||"confirm",i,t,r,u);e.open()},t.lockBodyScroll=function(n){var u,r,i;if(n===void 0&&(n=!1),(!Modernizr.mobile||n)&&$("#lock-scroll-scrollbar-offset").length===0){if(u=$(window).scrollTop(),r=$("body").height()>$(window).height(),!r)return;i=this.calculateScrollbarWidth();$("head").append("\n\t\t\t\t\t<style id='lock-scroll-scrollbar-offset'>\n\t\t\t\t\t\thtml.lockBodyScroll body { /* position: fixed; */ overflow: hidden; }\n\t\t\t\t\t\thtml.lockBodyScroll header { padding-right: "+i+"; width: calc(100% - "+i+"); }\n\t\t\t\t\t\thtml.lockBodyScroll #content { padding-right: "+i+"; box-sizing: border-box; }\n\t\t\t\t\t\thtml.lockBodyScroll .bg_top {margin-right: 16px;}\n\t\t\t\t\t<\/style>\n\t\t\t\t")}$("html").addClass("lockBodyScroll");t.lockCount++},t.unlockBodyScroll=function(){t.lockCount>0&&(t.lockCount--,t.lockCount===0&&$("html").removeClass("lockBodyScroll"))},t.calculateScrollbarWidth=function(){var n=$("<div class='modal-measure-scrollbar'/>").prependTo($("body")),t=$("<div class='inner'/>").appendTo(n);return n.width()-t.width()+"px"},t.lockCount=0,t}();t.Modals=i})(t=n.Utilities||(n.Utilities={}))}(Bnet||(Bnet={})),function(n){var t;(function(n){var t,i;(function(n){n[n.None=0]="None";n[n.Video=1]="Video";n[n.Link=2]="Link";n[n.Image=3]="Image"})(t||(t={}));i=function(){function n(){}return n.activityLinks=function(n){var t=n instanceof jQuery?n:$("<div/>").html(n.message),i=t.find("a");return i.each(function(n,t){var i=$(t),r="",f,e,u,o,s;if(i.is("[data-groupId]"))f=i.attr("data-groupId"),r=PageUrls.clanDetail+"/"+f;else if(i.is("[data-groupTopicId]"))r=PageUrls.clanPost+"/Post/"+i.attr("data-groupId")+"/"+i.attr("data-groupTopicId")+"/0/0/1";else if(i.is("[data-topicId]"))r=PageUrls.newPostsPage+"/"+i.attr("data-topicId")+"/0/0/1";else if(i.is("[data-postId]"))r=PageUrls.newPostsPage+"/"+i.attr("data-postId")+"/0/0/1";else if(i.is("[data-ccid]"))r=PageUrls.communityCreationsDetail+"?itemId="+i.attr("data-ccid");else if(i.is("[data-tag]"))e=i.attr("data-tag"),r=PageUrls.newTopicsPage+"/0/"+e;else if(i.is("[data-membershipId]"))u=i.attr("data-membershipId"),r=PageUrls.profilePage+"/"+u;else if(i.is("[data-characterId]")){var h=i.attr("data-membershipType"),u=i.attr("data-destinyMembershipId"),c=i.attr("data-characterId");r="/en/Legend/Gear/"+h+"/"+u+"/"+c}else i.is("[data-itemReferenceHash]")?(o=i.attr("data-itemReferenceHash"),r="/en/Armory/Detail?type=item&item="+o):i.is("[data-applicationId]")&&(s=i.attr("data-applicationId"),r="/en/Application/Detail/"+s);i.attr("href",r)}),t},n.messageIsVideo=function(n){var t=this.getAssetLinkFromMessage(n);return t?t.indexOf("<iframe")>=0||t.indexOf("TwitchPlayer.swf")>=0:!1},n.getAssetLinkFromMessage=function(n){var t=n.match(this.UrlRegex);return t&&t.length===1&&t[0].length===n.length?bungieNetPlatform.assetRenderer.renderAsset({path:t[0],width:this.AllowedWidth+"px",fixedRatioHeight:this.AllowedWidth*(9/16)+"px"}):null},n.messageLinks=function(n,i,r,u,f,e){var l="0",c,o,a,s,h,v;return f&&(l=f.membershipId),c=n.match(this.UrlRegex),o=this.getAssetLinkFromMessage(n),o&&(a=$(o).attr({target:"_blank",rel:"noreferrer"}),o=a[0].outerHTML),o?(s=t.None,o.indexOf("<iframe")>=0||o.indexOf("TwitchPlayer.swf")>=0?s=t.Video:o.indexOf("<a")>=0?s=t.Link:o.indexOf("<img")>=0&&(s=t.Image),h=!0,u?h=!1:(f&&f.context.isFollowing||r!=null&&l===r)&&(h=!1),h?e?(v=t[s].toLowerCase(),n='<div class="post_urlLinkOrImage '+v+'">\n\t\t\t\t\t\t\t\t\t\t<a title="'+Localizer.Actions.clicktoenlarge+'">'+o+'<\/a>\n\t\t\t\t\t\t\t\t\t\t<a class="btn_hideImage ir" data-messageId="'+i+'">\n\t\t\t\t\t\t\t\t\t\t\t<span>X<\/span>\n\t\t\t\t\t\t\t\t\t\t<\/a>\n\t\t\t\t\t\t\t\t\t<\/div>'):s===t.Image?n=Localizer.Format(Localizer.Forums.viewatownriskimage,{0:s,1:PageUrls.termsOfUse}):s===t.Video&&(n=Localizer.Format(Localizer.Forums.viewatownriskvideo,{0:s,1:PageUrls.termsOfUse})):n=o):c&&c.length>1&&(n=n.replace(this.UrlRegex,'<a class="externalLink" target="_blank" rel="noreferrer" href="$1">$1<\/a>')),n},Object.defineProperty(n,"bbCodes",{get:function(){return{quoteRegex:new RegExp("\\[quote\\]((?:(?!\\[quote\\])[^](?!\\[quote\\]))*?)\\[\\/quote\\]","gi"),boldRegex:/\[b\]([\s\S]+?)\[\/b\]/gi,underlineRegex:/\[u\]([\s\S]+?)\[\/u\]/gi,italicsRegex:/\[i\]([\s\S]+?)\[\/i\]/gi,spoilerRegex:/\[spoiler\]([\s\S]+?)\[\/spoiler\]/gi,urlRegex:/\[url\](\/[^\s'"<>\[]*?)\[\/url\]/gi,namedUrlRegex:/\[url\=(\/[^\s'"<>\[]*?)\]((?!.*?\[spoiler\])?[\s\S]+?)\[\/url\]/gi,externalUrlRegex:/\[url\](https?:\/\/[^\s'"<>\[]+?)\[\/url\]/gi,externalNamedUrlRegex:/\[url\=(https?:\/\/[^\s'"<>\[]+?)\]((?!.*?\[spoiler\])?[\s\S]+?)\[\/url\]/gi,googleUrlRegex:/\[google\]([\s\S]+?)\[\/google]/gi,newlineRegex:/\r?\n/gi,armory:/\[armory\]([^'"<>\[]+?)\[\/armory]/gi}},enumerable:!0,configurable:!0}),n.bbCodesReverse=function(n){var t=$("<div/>").html(n),i,r;return t.find("blockquote").each(function(n,i){var r=$(i);t.find(i).replaceWith("[quote]"+r.text()+"[/quote]")}),t.find("strong").each(function(n,i){var r=$(i);t.find(i).replaceWith("[b]"+r.text()+"[/b]")}),t.find("span.underline").each(function(n,i){var r=$(i);t.find(i).replaceWith("[u]"+r.text()+"[/u]")}),t.find("em").each(function(n,i){var r=$(i);t.find(i).replaceWith("[i]"+r.text()+"[/i]")}),t.find("div.spoiler").each(function(n,i){var r=$(i);t.find(i).replaceWith("[spoiler]"+r.text()+"[/spoiler]")}),t.find("br").each(function(n,i){t.find(i).replaceWith("\n")}),t.find("a").each(function(n,i){var r=$(i);t.find(i).replaceWith("[url="+r.attr("href")+"]"+r.text()+"[/url]")}),t.find("a.armoryLink").each(function(n,i){var r=$(i);t.find(i).replaceWith("[armory]"+r.text()+"[/armory]")}),i=t.find(".post_body"),r=i.length,r>1?"":r>0?i.html():t.html()},n.parseBBCode=function(n,t,i,r,u){var f,e,c,o,s,h;if(r===void 0&&(r=[]),u===void 0&&(u=!1),n){if(f=n,t&&r.indexOf(this.bbCodes.newlineRegex)===-1&&(f=f.replace(this.bbCodes.newlineRegex,"<br />")),e="",u&&(e='target="_blank"'),f=f.replace(/'/gi,"&#39;"),r.indexOf(this.bbCodes.quoteRegex)===-1)if(Modernizr.ie)f=f.replace(/\[quote\]/gi,"<blockquote>"),f=f.replace(/\[\/quote\]/gi,"<\/blockquote>");else{for(c=7,o=0;o<c-1;o++)f=f.replace(this.bbCodes.quoteRegex,"<blockquote>$1<\/blockquote>");for(s=f.match(/\[quote\]/gi),s&&(h=s.length),o=0;o<h;o++)f=o+1===h?f.replace(this.bbCodes.quoteRegex,"<blockquote>$1<\/blockquote>"):f.replace(this.bbCodes.quoteRegex,"$1")}return r.indexOf(this.bbCodes.boldRegex)===-1&&(f=f.replace(this.bbCodes.boldRegex,"<strong>$1<\/strong>")),r.indexOf(this.bbCodes.underlineRegex)===-1&&(f=f.replace(this.bbCodes.underlineRegex,"<span class='underline'>$1<\/span>")),r.indexOf(this.bbCodes.italicsRegex)===-1&&(f=f.replace(this.bbCodes.italicsRegex,"<em>$1<\/em>")),r.indexOf(this.bbCodes.armory)===-1&&(f=f.replace(this.bbCodes.armory,'<a href="/'+Localizer.CurrentCultureName+'/Search?query=$1&type=Items" class="armoryLink" '+e+'><i class="fa-th-list fa"><\/i>&nbsp;$1<\/a>')),i&&(f=bungieNetPlatform.tagHelper.injectSpans(f)),r.indexOf(this.bbCodes.urlRegex)===-1&&(f=f.replace(this.bbCodes.urlRegex,'<a href="'+PageUrls.root+'$1" rel="nofollow noopener" class="bungieLink" '+e+">$1<\/a>")),r.indexOf(this.bbCodes.namedUrlRegex)===-1&&(f=f.replace(this.bbCodes.namedUrlRegex,'<a href="'+PageUrls.root+'$1" rel="nofollow noopener" class="bungieLink" '+e+">$2<\/a>")),r.indexOf(this.bbCodes.externalUrlRegex)===-1&&(f=f.replace(/(\[url\](?!http))/gi,"$1http://"),f=f.replace(this.bbCodes.externalUrlRegex,'<a href="$1" rel="nofollow noopener" class="externalLink" '+e+">$1<\/a>")),r.indexOf(this.bbCodes.externalNamedUrlRegex)===-1&&(f=f.replace(this.bbCodes.externalNamedUrlRegex,'<a href="$1" rel="nofollow noopener" class="externalLink" '+e+">$2<\/a>")),r.indexOf(this.bbCodes.googleUrlRegex)===-1&&(f=f.replace(this.bbCodes.googleUrlRegex,'<a href="http://www.google.com/#q=$1" rel="nofollow noopener" class="externalLink" '+e+">$1<\/a>")),r.indexOf(this.bbCodes.spoilerRegex)===-1&&(f=f.replace(this.bbCodes.spoilerRegex,'<div class="spoiler contentHide">$1<\/div>')),f.replace(/&#39;/gi,"'")}return n},n.UrlRegex=/(https?:\/\/[^\s]+)/g,n.AllowedWidth=400,n}();n.Parse=i})(t=n.Utilities||(n.Utilities={}))}(Bnet||(Bnet={})),function(n){var t;(function(n){var t=function(){function t(){}return t.showServerError=function(n,t){return n.messageData!==undefined&&n.messageData.ValidationFieldName!==undefined?this.renderServerValidationMessage(n,t):!1},t.renderServerValidationMessage=function(t,i){var r,u;return i!==undefined&&i.length>0&&(r=i.find(function(n){return n.property.toLowerCase()===t.messageData.ValidationFieldName.toLowerCase()}),r)?(u={isError:!0,customMessage:t.errorMessage,element:r.element,type:n.ValidationTypes.custom},n.Validation.renderErrors([u]),!0):!1},t}();n.ServerValidation=t})(t=n.Utilities||(n.Utilities={}))}(Bnet||(Bnet={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var i=function(){function t(){}return t.getItem=function(t){try{return this.facility.getItem(t)}catch(i){n.error(i)}return null},t.key=function(t){try{return this.facility.key(t)}catch(i){n.error(i)}return null},t.setItem=function(t,i){try{return this.facility.setItem(t,i),!0}catch(r){n.error(r)}return!1},t.removeItem=function(t){try{return this.facility.removeItem(t),!0}catch(i){n.error(i)}return!1},t.clear=function(){try{return this.facility.clear(),!0}catch(t){n.error(t)}return!1},t.facility=null,t}(),u=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.facility=localStorage,t}(i),r;t.LocalStorage=u;r=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.facility=sessionStorage,t}(i);t.SessionStorage=r})(t=n.Utilities||(n.Utilities={}))}(Bnet||(Bnet={})),function(n){var t;(function(n){n[n.None=0]="None";n[n.IgnoreDiacritics=1]="IgnoreDiacritics";n[n.IgnoreCase=2]="IgnoreCase"})(t=n.StringCompareOptions||(n.StringCompareOptions={}))}(Bnet||(Bnet={})),function(n){var t;(function(t){var r=function(){function t(){}return t.htmlEncode=function(n){var t=document.createElement("a").appendChild(document.createTextNode(n)).parentNode,i=t;return i.innerHTML},t.startsWith=function(t,i,r){r===void 0&&(r=n.StringCompareOptions.None);var u=this.prepareStringWithOptions(t,r),f=this.prepareStringWithOptions(i,r);return u.startsWith(f)},t.contains=function(t,i,r){r===void 0&&(r=n.StringCompareOptions.None);var u=this.prepareStringWithOptions(t,r),f=this.prepareStringWithOptions(i,r);return u.indexOf(f)>-1},t.equals=function(t,i,r){r===void 0&&(r=n.StringCompareOptions.None);var u=this.prepareStringWithOptions(t,r),f=this.prepareStringWithOptions(i,r);return u===f},t.prepareStringWithOptions=function(t,i){var r=t;return i&n.StringCompareOptions.IgnoreDiacritics&&(r=this.removeDiacritics(r)),i&n.StringCompareOptions.IgnoreCase&&(r=r.toLowerCase()),r},t.removeDiacritics=function(n){for(var t=n.split(""),r=t.length-1,f=!1,u;r>=0;r--)u=t[r],i.Map.hasOwnProperty(u)&&(t[r]=i.Map[u],f=!0);return f&&(n=t.join("")),n},t.isNullOrWhiteSpace=function(n){return $.trim(n)===""},t.GenerateGuid=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(n){return(n^crypto.getRandomValues(new Uint8Array(1))[0]&15>>n/4).toString(16)})},t}(),i;t.String=r;i=function(){function n(){}return n.Map={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Œ":"OE","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","ẞ":"SS","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","œ":"oe","ɶ":"oe","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ſ":"s","ẛ":"s","ß":"ss","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","０":"0","₀":"0","⓪":"0","⁰":"0","¹":"1","⑴":"1","₁":"1","❶":"1","⓵":"1","⒈":"1","①":"1","１":"1","²":"2","❷":"2","⑵":"2","２":"2","₂":"2","⓶":"2","②":"2","⒉":"2","³":"3","３":"3","⒊":"3","⑶":"3","₃":"3","❸":"3","⓷":"3","③":"3","⓸":"4","④":"4","⒋":"4","４":"4","⁴":"4","₄":"4","❹":"4","⑷":"4","⒌":"5","₅":"5","⓹":"5","⑸":"5","❺":"5","⑤":"5","５":"5","⁵":"5","⑹":"6","⁶":"6","６":"6","❻":"6","₆":"6","⑥":"6","⓺":"6","⒍":"6","７":"7","⁷":"7","❼":"7","⓻":"7","⒎":"7","₇":"7","⑺":"7","⑦":"7","⑧":"8","⒏":"8","⓼":"8","⑻":"8","⁸":"8","８":"8","❽":"8","₈":"8","⓽":"9","９":"9","⒐":"9","❾":"9","⑼":"9","₉":"9","⑨":"9","⁹":"9"},n}()})(t=n.Utilities||(n.Utilities={}))}(Bnet||(Bnet={})),function(n){var t;(function(n){var t=function(){function n(){}return n.getQueryStringValue=function(n,t,i){t===void 0&&(t="?");i===void 0&&(i="");var r=this.getObjectFromQueryString(undefined,t);return n in r?r[n]:i},n.getObjectFromQueryString=function(n,t){var i,r;n===void 0&&(n=window.location.search);t===void 0&&(t="?");t==="#"&&(n=window.location.hash.replace("#!","#"));var e=n.split(t).pop(),o=e.split("&"),u={};for(i=0,r=o;i<r.length;i++){var s=r[i],f=s.split("="),h=f[0],c=f[1];u[h]=c}return u},n.createQueryFromObject=function(n,t){var r,i,f,u,e;t===void 0&&(t="?");r="";for(i in n)n.hasOwnProperty(i)&&i!==""&&(f=n[i],u=r.length===0?t:"&",n[i]!==""?(e=i+"="+f,r+=""+u+e):r+=""+u+i);return r},n.getUrlWithReplacementQuery=function(n,t,i){i===void 0&&(i="?");var r={};return r[n]=t,location.pathname+this.extendQuery(r,undefined,i)},n.extendQuery=function(n,t,i){t===void 0&&(t=window.location.search);i===void 0&&(i="?");var r=this.getObjectFromQueryString(t,i),u=$.extend({},r,n);return this.createQueryFromObject(u,i)},n.getPathAndQuery=function(){return""+location.pathname+location.search},n.urlToAnchorElement=function(n){if(typeof n=="string"){var t=$("<a/>").attr("href",n);return t[0]}return n},n.youtubeUrlToIframe=function(n,t){var c,e,l,f,r,s,h;if(t===void 0&&(t={}),c={width:"auto",height:"auto",disableAutoplay:!1},t=$.extend({},c,t),e="",!n.match(/(youtube\.com|youtu\.be)/i))return"";if(n.toLowerCase().indexOf("playlist")===-1){var i=n,u=0,o={};i=n.indexOf("v=")>-1?n.replace(/^((?:https?:\/\/)?(?:(?:www|m)\.)?)(youtube\.com|youtu\.be)[\s\S]*?v=([0-9A-Za-z\_\-]+)((&[\s\S]+)|$)/i,"$1youtube.com/embed/$3"):n.replace(/^((?:https?:\/\/)?(?:(?:www|m)\.)?)(youtube\.com|youtu\.be)[\s\S]*\/([0-9A-Za-z\_\-]+)((&[\s\S]+)|$)/i,"$1youtube.com/embed/$3");i=i.replace("/m.","/www.");i.indexOf("?")>-1&&(o=Utility.parseQueryString(i),l=i.split("?"),i=l[0]);(n.indexOf("#t=")>-1||n.indexOf("?t=")>-1)&&(f=n.match(/[#|\?]t=((\d+m)?(\d+[s]?)?)/i),r=f.toString(),f.length>1&&(r=f[0].split("=")[1]),s=r.match("m")?r.split("m")[0]:"0",h=s.length?r.split("m")[1].split("s")[0]:r.split("s")[0],u=Number(s)*60+Number(h?h:0));typeof o.start!="undefined"&&(u=o.start);window.location.protocol.indexOf("https")>-1&&i.indexOf("https")===-1&&(i=i.replace("http","https"));u&&(i=i+"?start="+u);var v=t.width==="auto"?"":"width='"+t.width+"' ",y=t.height==="auto"?"":"height='"+t.height+"' ",p=u?"&":"?",a="1";t.disableAutoplay&&(a="0");e="<iframe class='youtube-player' type='text/html' "+v+y+" src='"+i+p+"wmode=transparent&rel=0&fs=1&autoplay="+a+"' frameborder='0' allowfullscreen><\/iframe>"}return e},n.correctExternalLinks=function(t,i){var u,r;return i===void 0&&(i=!1),u="",i&&(u='target="_blank"'),r="",typeof t!="undefined"&&(r=t.replace(n.linkRegex,'$1<a href="$2" rel="nofollow noopener" class="externalLink">$2<\/a>'),r=r.replace(n.linkFineRegex,'$1<a href="$2" rel="nofollow noopener" class="externalLink" '+u+">$2<\/a>")),r},n.linkRegex=new RegExp(/([\s\(\>]|^|>)((http|https)\:\/\/([^\s\<\[]*))((?=[\,\.\!\:\;\-\"\)]([\s\<]|$)))/gi),n.linkFineRegex=new RegExp(/([\s]|^|>)((http|https)\:\/\/([^\"\s\<]*))/gi),n}();n.Url=t})(t=n.Utilities||(n.Utilities={}))}(Bnet||(Bnet={})),function(n){var t;(function(t){var i,r;(function(n){n[n.Invalid=0]="Invalid";n[n.Expired=1]="Expired";n[n.Current=2]="Current"})(i=t.CookieConsentValidity||(t.CookieConsentValidity={}));r=function(){function r(){}return Object.defineProperty(r,"isAuthenticated",{get:function(){return this.loggedInUserBnetMembershipId!=="0"},enumerable:!0,configurable:!0}),Object.defineProperty(r,"loggedInUserBnetMembershipId",{get:function(){var n=Cookies.Get(ServerVars.WebMembershipCookieName);return n!=null?n:"0"},enumerable:!0,configurable:!0}),Object.defineProperty(r,"onPageBungieNetMembershipId",{get:function(){var t="0";return n.Site.OnPageUser.MembershipData.bungieNetUser&&(t=n.Site.OnPageUser.MembershipData.bungieNetUser.membershipId),t},enumerable:!0,configurable:!0}),r.muteUser=function(n,t){var i={ignoredItemType:Globals.IgnoredItemType.User,itemContextType:Globals.IgnoredItemType.User,ignoredItemId:n};this.flagOrIgnoreItem(i,"ignore",Localizer.Community.whymuteuser,Localizer.Helptext.usermutetext,t)},r.unmuteUser=function(n,t){var i={ignoredItemType:Globals.IgnoredItemType.User,ignoredItemId:n};this.unignoreItem(i,t)},r.reportUser=function(n,t){var i={ignoredItemType:Globals.IgnoredItemType.UserProfile,itemContextType:Globals.IgnoredItemType.UserProfile,ignoredItemId:n};this.flagOrIgnoreItem(i,"flag",Localizer.Community.whyreportuserprofile,Localizer.Helptext.userprofilereporttext,t)},r.reportMessage=function(n,t){var i={ignoredItemType:Globals.IgnoredItemType.UserPrivateMessage,itemContextType:Globals.IgnoredItemType.UserPrivateMessage,ignoredItemId:n.memberFromId,itemContextId:n.messageId};this.flagOrIgnoreItem(i,"flag",Localizer.Community.whyreportmessage,Localizer.Helptext.messagereporttext,t)},r.flagOrIgnoreItem=function(i,r,u,f,e){var o=$.extend({},{ignoredItemId:null,ignoredItemType:null,itemContextId:null,comment:null,itemContextType:null,reason:null,requestedBlastBan:null,requestedPunishment:null},i),h=r==="flag"?bungieNetPlatform.ignoreService.FlagItem:bungieNetPlatform.ignoreService.IgnoreItem,s=new n.ConfirmationModal(r,n.ConfirmationReason.Warning,$("#report-item-template").html(),function(){var r=new n.UiKit.FormKit.DropdownItem("report-item"),i;o.reason=r.val();i=new n.UiKit.FormKit.DropdownItem("mod-report-item");i.exists&&(o.requestedPunishment=i.val());h(o,function(){t.Modals.Alert(Localizer.Community.thankyouforyourreport);e&&e()},function(n){return t.Modals.Alert(n)})});s.afterOpenCallback=function(){var n={title:u,description:f},t=new Vue({el:s.modalContentElement[0],data:n})};s.open()},r.unignoreItem=function(n,i){bungieNetPlatform.ignoreService.UnignoreItem(n,function(){i&&i()},function(n){return t.Modals.Alert(n)})},r.checkAcl=function(t){var i=n.Site.GlobalData.CurrentUser;if(!i)throw"CurrentUser is not available, and must be loaded by something first";return i.userAcls&&i.userAcls.length>0&&i.userAcls.indexOf(t)>-1?!0:!1},r.SetConsentCookie=function(){if(r.ConsentCookieIsEnabled()){var t=ServerVars.Cst.name,i=ServerVars.Cst.currentVersion,u=moment().add(7,"years").toDate();Cookies.SetWithExpires(t,i,u);n.Analytics.BnetTracking.Instance.loadTrackers()}},r.ConsentCookieIsEnabled=function(){return ServerVars.Cst.enabled},r.CookieConsentValidity=function(){var r=ServerVars.Cst.currentVersion,u=ServerVars.Cst.name,n=Cookies.Get(u),t=i.Invalid;return n&&(t=n===r?i.Current:i.Expired),t},r.CookieConsentIsCurrent=function(){return this.CookieConsentValidity()===i.Current},r}();t.User=r})(t=n.Utilities||(n.Utilities={}))}(Bnet||(Bnet={}));jQuery.cachedScript=function(n,t){return t=$.extend(t||{},{dataType:"script",cache:!0,url:n}),jQuery.ajax(t)};$.fn.getPath=function(){var i,r,t,n,u,f;if(this.length!=1)throw"Requires one element.";for(r=this;r.length;){if(t=r[0],n=t.localName||t.tagName||t.nodeName,!n||n=="#document")break;if(n=n.toLowerCase(),t.id)return n+"#"+t.id+(i?" > "+i:" ");t.className&&(n+="."+t.className.split(/\s+/).join("."));u=r.parent();f=u.children(n);f.length>1&&(n+=":eq("+f.index(r)+")");i=n+(i?" > "+i:" ");r=u}return i};$.extend($.easing,{def:"easeOutQuad",swing:function(n,t,i,r,u){return $.easing[$.easing.def](n,t,i,r,u)},easeInQuad:function(n,t,i,r,u){return r*(t/=u)*t+i},easeOutQuad:function(n,t,i,r,u){return-r*(t/=u)*(t-2)+i},easeInOutQuad:function(n,t,i,r,u){return(t/=u/2)<1?r/2*t*t+i:-r/2*(--t*(t-2)-1)+i}});$.fn.CenterIt=function(){var n={sTop:function(){return window.pageYOffset||document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop},wHeight:function(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body.clientHeight},sLeft:function(){return window.pageXOffset||document.documentElement&&document.documentElement.scrollLeft||document.body.scrollLeft},wWidth:function(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body.clientWidth}};return this.each(function(t){var o,e,l;if(t===0){var u=$(this),r=u.height(),i=u.width(),f;if(u.find(".img_lightbox, #image_lightbox").length){o=new Image;o.src=u.find(".img_lightbox, #image_lightbox").attr("src");var h=o.width,c=o.height,s=u.find(".lightboxExtra").length?u.find(".lightboxExtra").outerHeight():0;h!==i&&(i=h);c+s!==r&&(r=c+s);Modernizr.mobile&&!Modernizr.ipad?(r>n.wHeight()&&(f=n.wHeight()/r,r=n.wHeight(),i=i*f),i>n.wWidth()&&(f=n.wWidth()/i,i=n.wWidth(),r=r*f)):(r>n.wHeight()*.9?(f=n.wHeight()*.9/r,r=n.wHeight()*.9,i=i*f):i<350&&Modernizr.mobile&&(i=350,f=c/h,r=i*f),i>n.wWidth()*.9&&(f=n.wWidth()*.9/i,i=n.wWidth()*.9,r=r*f));u.find(".ageGate").length?u.add(".ageGatePrompt, .ageGateForbidden").css({width:Math.round(i)+"px",height:Math.round(r-s)+"px"}):(u.css({width:Math.round(i)+"px",height:Math.round(r)+"px"}),u.find("img").css({width:Math.round(i)+"px",height:Math.round(r-s)+"px"}))}else u.find("iframe").length&&u.find("iframe").attr("width")===""&&(i=n.wHeight()*.8,f=9/16,r=i*f,r>n.wHeight()*.9&&(r=n.wHeight()*.7,i=r/f),i>n.wWidth()*.9&&(i=n.wWidth()*.7,r=i*f),i<350&&(i=350,r=i*f),u.find(".ageGate").length?u.add(".ageGatePrompt, .ageGateForbidden, iframe").css({width:Math.round(i)+"px",height:Math.round(r)+"px"}):u.add(u.find("iframe")).css({width:Math.round(i)+"px",height:Math.round(r)+"px"}));e=n.sTop()+n.wHeight()/2-r/2;e=e<0?0:e;l=n.sLeft()+n.wWidth()/2-i/2;u.css({position:"absolute",marginTop:"0",top:e,left:l})}})};$.fn.swapSvgs=function(n){n=n||function(){};$(this).each(function(){if(!$(this).hasClass("replaced-svg")){var t=jQuery(this),f=t.height(),e=t.width(),r=t.attr("id"),u=t.attr("class"),i=t.attr("src");typeof i!="undefined"&&i!==""&&jQuery.get(i,function(i){var o=jQuery(i).find("svg");typeof r!="undefined"&&(o=o.attr("id",r));typeof u!="undefined"&&(o=o.attr("class",u+" replaced-svg"));o=o.removeAttr("xmlns:a");o.attr("height",f);o.attr("width",e);t.replaceWith(o);n()},"xml")}})};jQuery(function(){typeof Highcharts!="undefined"&&Highcharts.setOptions({lang:{decimalPoint:Localizer.Statsformats.decimalpoint,thousandsSep:Localizer.Statsformats.thousandsseparator}})});Modernizr.addTest("history",function(){return window.history&&window.history.pushState});Modernizr.addTest("firefox",function(){return!!navigator.userAgent.match(/firefox/i)});Modernizr.addTest("ie",function(){return!!navigator.userAgent.match(/msie|trident/gi)});Modernizr.addTest("iemetro",function(){var n=null;try{new ActiveXObject("")}catch(t){errorName=t.name}try{n=!!new ActiveXObject("htmlfile")}catch(t){n=!1}return n=errorName!=="ReferenceError"&&n===!1?!1:!0,!n});Modernizr.addTest("ietouchmobile",function(){return Modernizr.iemetro&&window.navigator.msPointerEnabled});Modernizr.addTest("placeholder",function(){return!!("placeholder"in(Modernizr.input||document.createElement("input"))&&"placeholder"in(Modernizr.textarea||document.createElement("textarea")))});Modernizr.addTest("download",function(){return!!("download"in document.createElement("a"))});Modernizr.addTest("webkit",function(){return RegExp("AppleWebKit").test(navigator.userAgent)});Modernizr.addTest("safari",function(){return/Safari|iphone|ipad|ipod/gi.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)});Modernizr.addTest("mobile",function(){return RegExp("Mobile").test(navigator.userAgent)});Modernizr.addTest("ipad",function(){return RegExp("iPad").test(navigator.userAgent)});Modernizr.addTest("android",function(){return RegExp("Android").test(navigator.userAgent)});Modernizr.addTest("chrome",function(){return RegExp("Chrome").test(navigator.userAgent)});Modernizr.addTest("androidtablet",function(){return RegExp("Android").test(navigator.userAgent)&&!RegExp("Mobile").test(navigator.userAgent)});Modernizr.addTest("gestures",function(){return Modernizr.hasEvent("gesturestart",window)});Modernizr.addTest("ietouch",function(){return window.navigator.msMaxTouchPoints>0});Modernizr.addTest("ietouchbrowser",function(){return window.navigator.msMaxTouchPoints>0});Modernizr.addTest("cssfilters",function(){var n=document.createElement("div");return n.style.cssText=Modernizr._prefixes.join("filter:blur(2px); "),!!n.style.length&&(void 0===document.documentMode||9<document.documentMode)});Modernizr.addTest("object-fit",!!Modernizr.prefixed("objectFit"));Modernizr.addTest("edge",function(){return window.navigator.userAgent.indexOf("Edge/")>-1});ko.bindingHandlers.stopBinding={init:function(){return{controlsDescendantBindings:!0}}};ko.virtualElements.allowedBindings.stopBinding=!0;"indexOf"in Array.prototype||(Array.prototype.indexOf=$.inArray);Array.prototype.remove=function(n,t){var i=this.slice((t||n)+1||this.length);return this.length=n<0?this.length+n:n,this.push.apply(this,i)};removeByAttr=function(n,t,i){for(var r=n.length;r--;)n[r]&&n[r][t]&&arguments.length>2&&n[r][t]===i&&n.splice(r,1);return n};Object.size=function(n){var t=0;for(var i in n)n.hasOwnProperty(i)&&t++;return t};typeof String.prototype.trim!="function"&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});viewModels.loggedInUserModel.subscribe(function(){$(document).ready(function(){$(document).trigger("loggedInUserModelLoaded");$("body").hasClass("UserResearch")&&$("body").hasClass("Survey")&&(typeof viewModels.loggedInUserModel().gamerTag!="undefined"?($("#gamertag").find("input").attr("tabindex",-1).val(viewModels.loggedInUserModel().gamerTag()).attr("readonly","readonly"),$("#gamertag").find(".input").append('<a class="staticLink" target="_blank" href="'+PageUrls.settingsPage+'?tab=account">Link your Gamertag in your Settings<\/a>')):($("#gamertag").find("input").attr("tabindex","-1"),$("#gamertag").find(".input").append('<a class="floatingLink" target="_blank" href="'+PageUrls.settingsPage+'?tab=account">Link your Gamertag in your Settings<\/a>')),typeof viewModels.loggedInUserModel().psnId!="undefined"?($("#psnid").find("input").attr("tabindex","-1").val(viewModels.loggedInUserModel().psnId()).attr("readonly","readonly"),$("#psnid").find(".input").append('<a class="staticLink" target="_blank" href="'+PageUrls.settingsPage+'?tab=account">Link your PSN ID in your Settings<\/a>')):($("#psnid").find("input").attr("tabindex","-1"),$("#psnid").find(".input").append('<a class="floatingLink" target="_blank" href="'+PageUrls.settingsPage+'?tab=account">Link your PSN ID in your Settings<\/a>')),typeof viewModels.loggedInUserModel().blizzardDisplayName!="undefined"?($("#blizzarddisplay").find("input").attr("tabindex","-1").val(viewModels.loggedInUserModel().blizzardDisplayName()).attr("readonly","readonly"),$("#blizzarddisplay").find(".input").append('<a class="staticLink" target="_blank" href="'+PageUrls.settingsPage+'?tab=account">Link your Blizzard display name in your Settings<\/a>')):($("#blizzarddisplay").find("input").attr("tabindex","-1"),$("#blizzarddisplay").find(".input").append('<span class="staticLink">Please include your entire BattleTag in the format of xxxxxxxx#3456<\/span><br>'),$("#blizzarddisplay").find(".input").append('<a class="floatingLink" target="_blank" href="'+PageUrls.settingsPage+'?tab=account">Link your Blizzard display name in your Settings<\/a>')),typeof viewModels.loggedInUserModel().email!="undefined"?($("#email").find("input").val(viewModels.loggedInUserModel().email()).attr("readonly","readonly"),viewModels.loggedInUserModel().emailStatus()!==9?$("#email").find("#email.input").append('<a class="" target="_blank" href="'+PageUrls.settingsPage+'?tab=notificationsAndEmail">Your email is not validated.  Please validate your email.<\/a>'):$("#email").find("#email.input").append('<a class="" target="_blank" href="'+PageUrls.settingsPage+'?tab=notificationsAndEmail">Change your Email in your Settings<\/a>')):$("#email.input").append('<a class="" target="_blank" href="'+PageUrls.settingsPage+'#tab=notificationsAndEmail">Change your Email in your Settings<\/a>'))})});$(document).on("click",".btn_gotomessage[data-messageid]",function(n){n.preventDefault();var t=$(this);Utility.sendToPrivateMessage(t.attr("data-messageid"))});$(document).on("focus","input,textarea",function(){Modernizr.ie&&($(this).attr("placeholder")&&$(this).data("placeholder",$(this).attr("placeholder")),$(this).val()==$(this).attr("placeholder")&&$(this).val(""))});$(document).one("DOMMouseScroll",function(){var n=$(window).scrollTop(),t=setTimeout(function(){$(window).scrollTop()===n&&window.scrollBy(0,-1)},100)});typeof Hash=="undefined"&&Modernizr.localstorage&&typeof localStorage.history!="undefined"&&localStorage.setItem("history","");$(document).on("click",".btn_preorder",function(){var n=window.location.href;Bnet.Analytics.trackEvent("Preorder",n)});$(document).on("click",".select",function(n){var t=$(this),i;if(t.hasClass("linkMenu"))t.hasClass("opened")?t.removeClass("opened"):t.addClass("opened");else{n.preventDefault();$(document).off("click.selectMenu");$(document).on("click.selectMenu",function(n){$(n.currentTarget).is(t.children())||$(n.currentTarget).is(t)||(t.removeClass("opened"),$(document).off("click.selectMenu"))});if($(n.currentTarget).is($(this).children()))return;if(t.hasClass("opened"))t.removeClass("opened");else{t.addClass("opened");i=t;t.find(".option").off("click.selectMenu");t.find(".option").on("click.selectMenu",function(n){if(!$(this).hasClass("exempt")){n.preventDefault();var t=$(this);i.attr("data-value",t.data("value"));i.find(".value").text(t.find("a").text());i.removeClass("opened")}})}}});$(document).ready(function(){typeof LightBox!="undefined"&&(customAlert=new LightBox(null,$("#alert")),customAlert_forActions=new LightBox(null,$("#alert_noClose")),mediaLightBox=new LightBox(null,$("#lightbox")))}),function(){var n,t,i;typeof document.hidden!="undefined"?(n="hidden",t="visibilitychange"):typeof document.mozHidden!="undefined"?(n="mozHidden",t="mozvisibilitychange"):typeof document.msHidden!="undefined"?(n="msHidden",t="msvisibilitychange"):typeof document.webkitHidden!="undefined"&&(n="webkitHidden",t="webkitvisibilitychange");typeof document.addEventListener!="undefined"&&(i=function(){document[n]?($("html").addClass("hidden"),$(document).trigger("browserWindowIsHiding")):($("html").removeClass("hidden"),$(document).trigger("browserWindowIsRevealing"))},document.addEventListener(t,i,!1))}();UtilityOld={_urlCharacterWhitelistRegex:new RegExp(/[^A-Za-z0-9\-\_]+/gim),_whiteSpaceRegex:new RegExp(/[\s]+/gim),toTitleCase:function(n){return typeof n!="undefined"?n.substring(0,1).toUpperCase()+n.substring(1).toLowerCase():""},makeFriendlyUrlPrefix:function(n){if(typeof n=="string"&&n.trim()!=""){var t=n.replace(Utility._whiteSpaceRegex,"-");return t=t.replace(Utility._urlCharacterWhitelistRegex,""),t.length>50&&(t=t.substr(0,50)),"/7_"+t}return""},ackItem:function(n,t,i){t=t||function(){};i=i||function(){};bungieNetPlatform.userService.SetAcknowledged(n,function(n){t(n)},function(n){i(n)})},sendToPrivateMessage:function(){},clamp:function(n,t){var i=n,r=$(i),o,f,u,e;if(r.css({height:"auto","max-height":"none","min-height":"0"}),o=i.offsetHeight,f=text=i.innerHTML,i.innerHTML="a",u=i.offsetHeight*t,i.innerHTML=f,o<u){r.css({height:"","max-height":"","min-height":""});return}for(arr=text.split(" "),e=0;e<arr.length;e++){if(text=text.substring(0,text.lastIndexOf(" ")),i.offsetHeight==u){for(text=text+"...",r.addClass("clamped"),r.data("original",f),i.innerHTML=text;i.offsetHeight>u;)text=text.substring(0,text.lastIndexOf(" ")),text=text+"...",i.innerHTML=text;break}i.innerHTML=text}},getCssValue:function(n,t){var r="",i=this.getAllStyles(n);return typeof i!="undefined"&&typeof i[t]!="undefined"&&i[t]!==""&&(r=i[t]),r},TagRegex:/(?:^|,\s?|;\s?|\s)\#?([a-zA-Z\u00C0-\u017F\u01FA-\u0217][a-zA-Z\u00C0-\u017F\u01FA-\u0217_0-9]{2,29})/ig,ValidateTags:function(n,t,i){var u,e,r,f;for(t==!0&&(n=n.replace(/%23/g,"#")),u=n.split(" "),e=!0,r=0;r<u.length;r++)if(u[r]!=null&&u[r]!=""&&u[r]!=" "&&(f=Utility.GetValidTags(u[r],!1,i),f==null||f.length==0||f.length>1||f[0]!=u[r])){e=!1;break}return e},GetValidTags:function(n,t,i){var u,r,f,e;if(t==!0&&(n=n.replace(/%23/g,"#")),u=[],Utility.TagRegex.lastIndex=0,r=Utility.TagRegex.exec(n),f=[],typeof i!="undefined"&&i.length>0)for(e=0;e<i.length;e++)f.push(i[e].tag);while(r!=null)(f.length==0||f.join(" ").toLowerCase().indexOf(r[1].toLowerCase())==-1)&&(t?u.push("%23"+r[1]):u.push("#"+r[1])),r=Utility.TagRegex.exec(n);return Utility.TagRegex.lastIndex=0,u},ContentVersioned:function(n){return ServerVars.StaticHostEnabled&&n.toLowerCase().indexOf("http")<0&&(n=("https:"==document.location.protocol?"":"http://"+ServerVars.StaticHost)+n+"?"+ServerVars.ContentVersion),n},IsAuthenticated:function(){return this.MembershipId()>0?!0:!1},MembershipId:function(){var t=Cookies.Get(ServerVars.WebMembershipCookieName),n;return t!=null?(n=parseInt(t),isNaN(n)?0:n):0},alert:function(n){customAlert.clearContent();customAlert.showLightbox();customAlert.loadLightbox(n,!0)},alert_noClose:function(n){customAlert_forActions.clearContent();customAlert_forActions.showLightbox();customAlert_forActions.loadLightbox(n,!0)},showMediaLightBox:function(n){mediaLightBox.clearContent();mediaLightBox.showLightbox();mediaLightBox.loadLightbox(n,!0)},centerMediaLightBox:function(){mediaLightBox.positionContent()},reloadMediaLightBox:function(n){mediaLightBox.clearContent();mediaLightBox.reload(n)},closeMediaLightBox:function(){mediaLightBox.clearContent();mediaLightBox.closeLightbox()},transition:Modernizr.prefixed("transition"),transform:Modernizr.prefixed("transform"),getTransitionLongHand:function(){return{transitionDuration:this.transition+"Duration",transitionDelay:this.transition+"Delay",transitionProperty:this.transition+"Property",transitionTimingFunction:this.transition+"TimingFunction"}},getTransitionEndName:function(){return{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"msTransitionEnd",transition:"transitionend"}[this.transition]},getCssPrefixedName:function(n){return n.replace(/([A-Z])/g,function(n,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")},urlToLinkObject:function(n){return $("<a/>").attr("href",n)[0]},parseHash:function(n){var n=n.replace("?","#"),t,i;for(n=n.replace("#!","#"),n=n.split("#").pop(),hashArray=n.split("&"),hashJson={},t=0;t<hashArray.length;t++)i=hashArray[t].split("="),hashJson[i[0]]=i[1];return hashJson},joinHash:function(n){var t="";for(key in n)t+=t.length?"&":"#",t+=key,typeof n[key]!="undefined"&&n[key]!=""&&(t+="="+n[key]);return t},updateLinkWithHash:function(n,t,i){var r,s,u,e,o;if((i=typeof i=="undefined"||!i?!1:!0,t=typeof t=="undefined"||t==null?[]:t,typeof n.data("originalhref")=="undefined"&&n.attr("data-originalhref",n.attr("href")),r=n.data("originalhref"),typeof r!="undefined"&&r)&&(s=r.substring(0,1)==="#",s||i)){var h=Utility.parseHash(r),f=$.extend({},Hash),c=t.length;for(u=0;u<c;u++)t[u]in f&&delete f[t[u]];if(e=r,s){for(o in h)t.indexOf(o)===-1&&(f[o]=h[o]);e=Utility.joinHash(f)}else e=r+Utility.joinHash(Hash);n.attr("href",e)}},isBound:function(n,t){return typeof n.data("events")!="undefined"&&typeof n.data("events")[t]!="undefined"?!0:!1},getAge:function(n){var t=Utility.parseDate(n),i=new Date,f=i.getFullYear(),u=i.getMonth(),e=i.getDate(),r=f-t.getFullYear();return u<t.getMonth()&&r--,t.getMonth()==u&&e<t.getDate()&&r--,r},getBadgeClassName:function(n){var t=Utility.getAge(n),i="";return t>0&&t<5?i="grey showYear":t>4&&t<10?(i="green showYear",t==7&&(i="blue showYear")):t>9&&t<15?i="red showYear":t>14&&(i="gold showYear"),i},parseDate:function(n){var i=""+n,t=i.split("."),r;return t.length<=1&&(t=i.split("Z")),r=Date.parse(t[0]),new Date(r)},dateToString:function(n,t){return Date.parseExact(n,"yyyy-MM-ddTHH:mm:ssZ").toString(t)},getLocalTime:function(n){var t;if(n instanceof Date)t=n;else if(typeof n=="string"){var u=n.split("T"),i=u[0].split("-"),f=u[1].split("Z"),r=f[0].split(":"),e=r[2].split("."),o=Number(r[0]);t=new Date;t.setUTCFullYear(Number(i[0]));t.setUTCDate(1);t.setUTCMonth(Number(i[1])-1);t.setUTCDate(Number(i[2]));t.setUTCHours(Number(o));t.setUTCMinutes(Number(r[1]));t.setUTCSeconds(Number(e[0]))}else t=new Date(n);return t},getLocalTimeStringKnownFormat:function(n,t){var i=Utility.getLocalTime(n);return i.toString(t)},getLocalTimeString:function(n,t,i,r){var l=Utility.getLocalTime(n),u=l.toLocaleTimeString(Localizer.CurrentCultureName),o=l.getDate(),s=l.getMonth()+1,h=l.getFullYear(),a,f,c,v,e;Localizer.CurrentCultureName=="ja"&&(o=o+Localizer.Time.day,h=h+Localizer.Time.year);a=Localizer.Time.at;l.getHours()==1&&(a=Localizer.Time.atoneam);s=Localizer.Time["monthabbr"+s];switch(Localizer.CurrentCultureName){case"en":f=s+" "+o;c=!0;break;case"de":f=o+". "+s;c=!1;break;case"ja":f=s+o;c=!1;break;default:f=o+" "+s;c=!1}return v=":",u.indexOf(v)===-1&&u.split(".").length>1&&(v="."),e=u.split(v),e[2].indexOf(" ")===-1&&c||c?e[0]>12?(e[0]=e[0]-12,u=e.join(":"),u.indexOf(" PM")===-1&&u.indexOf("‎PM")===-1&&(u=u+" PM")):u.indexOf(" AM")===-1&&u.indexOf(" PM")===-1&&u.indexOf("‎PM")===-1&&u.indexOf("‎AM")===-1&&(u=u+" AM"):(u.indexOf("PM")>-1&&(e[0]=parseInt(e[0],10)+12,u=e.join(":")),u=u.replace(/PM/gi,""),u=u.replace(/AM/gi,""),u=u.replace(" ","")),r?u:t?Modernizr.mobile?f:f+(i?"":" "+a+u):Modernizr.mobile?Localizer.CurrentCultureName=="ja"?h+f:f+" "+h:Localizer.CurrentCultureName=="ja"?h+f+(i?"":" "+a+u):f+" "+h+(i?"":" "+a+u)},padNumber:function(n,t){for(var i=n+"";i.length<t;)i="0"+i;return i},colonSeparatedTimeFromMS:function(n,t){var i,f,e,u,r;return t=typeof t=="undefined"?!1:t,i=Math.floor(n/1e3),u=Math.floor(i/86400),e=Math.floor(i/3600)%24,f=Math.floor(i/60)%60,i=Math.floor(i%60),r=Utility.padNumber(e,2)+":"+Utility.padNumber(f,2),u&&(r=Utility.padNumber(u,2)+":"+r),t&&(r+=":"+Utility.padNumber(i,2)),r},inheritPrototype:function(n,t){var i=function(){};i.prototype=t.prototype;n.prototype=new i;n.prototype.constructor=n;n.superclass=t.prototype},parseQueryString:function(n){var r,t,i;for(n=n.replace(/&amp;/gi,"&"),r=n.split("?").pop(),queryStringArray=r.split("&"),queryStringJson={},t=0;t<queryStringArray.length;t++)i=queryStringArray[t].split("="),queryStringJson[i[0]]=i[1];return queryStringJson},findTransformedCoordinates:function(n){var t=$(n),i=t.css("transform")||t.css("-moz-transform")||t.css("-webkit-transform")||t.css("-o-transform")||t.css("-khtml-transform")||n.css("msTransform"),r;return i=i.replace(/px|\(|\)|matrix/gi,""),r=i.split(","),{top:r[5]||0,left:r[4]||0}},loadAndCacheContent:function(n,t,i){if(typeof $.data(n,t)=="undefined")return $.Deferred(function(r){$.when(i()).done(function(i){$.data(n,t,i);r.resolve(i)}).fail(r.reject)}).promise()},moveElement:function(n,t,i){i.style.bottom="auto";i.style.right="auto";i.style.top=t+"px";i.style.left=n+"px"},timerCountDown:function(n){var t,i,r,u;return n<0&&(n=0),t=Math.floor(n/86400),n%=86400,i=Math.floor(n/3600),n%=3600,r=Math.floor(n/60),n%=60,u=n,{days:t,hours:i,minutes:r,seconds:u}},timerCountUp:function(n){var u=Math.floor(n/864e5),t,i,r;return n%=864e5,t=Math.floor(n/36e5),n%=36e5,i=Math.floor(n/6e4),n%=6e4,r=n,{days:u,hours:t,minutes:i,seconds:r}},getDaysSince:function(n){var t=(new Date).getTime()-n;return refreshTime=864e5,Math.round(t/refreshTime)},getTimeBucket:function(n){var t=Utility.getDaysSince(n);return units=t<1?Localizer.Time.activitytoday:t==1?Localizer.Time.activityyesterday:t>1&&t<7?Localizer.Time.activityearlierthisweek:t>6&&t<14?Localizer.Time.activitylastweek:Localizer.Time.activityearlierthanlastweek},convertDateToUTC:function(n){return new Date(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds())},windowFocusBlurEvents:function(n,t){var i=$(window);i.bind("focus.notVisible",function(n){t(n)});i.bind("blur.notVisible",function(t){n(t)})},fadeIn:function(n,t,i){var f=n,r=n.get(0),e=i,u,o;Modernizr.csstransitions?(u=this.getTransitionLongHand(),r.style[u.transitionProperty]="opacity",r.style[u.transitionDuration]=t/1e3+"s",r.style[u.transitionTimingFunction]="ease-out",r.style[u.transitionDelay]="0s",r.style.opacity="0",o=this.getTransitionEndName(),f.bind(o,function(){r.style[u.transitionProperty]="none";r.style.opacity="";e(f)}),setTimeout(function(){r.style.opacity=1},0)):f.css("display","none").fadeIn(t,function(){e(f)})},showConfirmationDialog:function(n,t,i,r,u){var f="<p>"+n+'<\/p><p><a  class="btn_cancel btn_blue">'+r+'<\/a><a  class="btn_approveConfirmed btn_blue">'+i+"<\/a><\/p>";Utility.alert_noClose(f);$("#alert_noClose").attr("class","alert");$("#alert_noClose").addClass("alert_approve "+t);$("#alert_noClose").off("click");$("#alert_noClose").on("click",".btn_approveConfirmed",function(n){n.preventDefault();customAlert_forActions.closeLightbox();u()});$("#alert_noClose .btn_cancel").off("click");$("#alert_noClose .btn_cancel").on("click",function(n){n.preventDefault();customAlert_forActions.closeLightbox()})},getCaret:function(n){var i,t,r;return n.selectionStart?n.selectionStart:document.selection?(n.focus(),i=document.selection.createRange(),i==null)?0:(t=n.createTextRange(),r=t.duplicate(),t.moveToBookmark(i.getBookmark()),r.setEndPoint("EndToStart",t),r.text.length):0},getIndicesOf:function(n,t,i){var u=0,e=n.length,r,f=[];for(i||(t=t.toLowerCase(),n=n.toLowerCase());(r=t.indexOf(n,u))>-1;)f.push(r),u=r+e;return f},getSelection:function(n){var t,i,r,u;return document.selection!=undefined?(n.focus(),i=document.selection.createRange(),t=i.text):n.selectionStart!=undefined&&(r=n.selectionStart,u=n.selectionEnd,t=n.value.substring(r,u)),t},copyElementText:function(n){n=$(n)[0];Utility.selectTextOfElement(n);var t;try{t=document.execCommand("Copy",!1,null)}catch(i){t=!1}return $(n).blur(),window.getSelection().removeAllRanges(),t},selectTextOfElement:function(n){var t,i;n=$(n)[0];document.body.createTextRange?(t=document.body.createTextRange(),t.moveToElementText(n),t.select()):window.getSelection&&(i=window.getSelection(),t=document.createRange(),t.selectNodeContents(n),i.removeAllRanges(),i.addRange(t))},getInputSelectionPosition:function(n){n.focus();var t=0,r=0,o,f,i,u,e;return typeof n.selectionStart=="number"&&typeof n.selectionEnd=="number"?(t=n.selectionStart,r=n.selectionEnd):(f=document.selection.createRange(),f&&f.parentElement()==n&&(u=n.value.length,o=n.value.replace(/\r\n/g,"\n"),i=n.createTextRange(),i.moveToBookmark(f.getBookmark()),e=n.createTextRange(),e.collapse(!1),i.compareEndPoints("StartToEnd",e)>-1?t=r=u:(t=-i.moveStart("character",-u),t+=o.slice(0,t).split("\n").length-1,r=i.compareEndPoints("EndToEnd",e)>-1?u:-i.moveEnd("character",-u)+(o.slice(0,r).split("\n").length-1)))),{start:t,end:r}},inputCharacterCounter:function(n,t,i){var u=n.val(),r=0,e=i,f=u.length;f>i?(n.val(u.substr(0,i)),r=0):r=e-f;t.text(r)},isOnlyBBElements:function(n){var i=!1,t=$(document.createElement("div"));return t.append(n),t.find("*").not("a.bungieLink, a.externalLink, blockquote, strong, em, span.underline, div.spoiler, br").length===0&&(i=!0),t.remove(),i},sendMessageToUser:function(n){var i,r,t;if($(".nav_links .mail").hasClass("opened")||setTimeout(function(){$(".nav_links li.mail").addClass("opened")},1),$(".mail_create").hasClass("hide")&&Mail.gotoMailPanel($(".mail_create")),$(".recipients .recipient [contenteditable=true]:empty").length&&$(".recipients .recipient [contenteditable=true]:empty").remove(),n.length>0)for(i=0,r=n.length;i<r;i++)t=n[i],$(".recipients .container_textbox [data-membershipId="+t.membershipId+"]").length<1&&$(".recipients .container_textbox").append('<li class="recipient"><p contenteditable="true" data-membershipid="'+t.membershipId+'" data-displayname="'+t.displayName+'">'+t.displayName+" ("+t.uniqueName+')<\/p><a class="btn_delete">X<\/a><\/li>')},placeCaretAtEnd:function(n){var t,r,i;n.focus();typeof getSelection!="undefined"&&typeof document.createRange!="undefined"?(t=document.createRange(),t.selectNodeContents(n),t.collapse(!1),r=window.getSelection(),r.removeAllRanges(),r.addRange(t)):typeof document.body.createTextRange!="undefined"&&(i=document.body.createTextRange(),i.moveToElementText(n),i.collapse(!1),i.select())},setCaretPosition:function(n,t){var i,r;n.length!=null&&(i=n.get(0),i.createTextRange?(r=i.createTextRange(),r.move("character",t),r.select()):i.setSelectionRange?(i.focus(),i.setSelectionRange(t,t)):i.focus())},getHtmlFromSelection:function(n,t){var o=t,u="",f=document.createElement("div"),i,r,e;if(typeof getSelection!="undefined"){if(i=window.getSelection(),i.rangeCount){for(r=0,e=i.rangeCount;r<e;++r)f.appendChild($(i.getRangeAt(r).commonAncestorContainer.parentNode).is(t.join(","))?i.getRangeAt(r).commonAncestorContainer.parentNode.cloneNode(!0):i.getRangeAt(r).cloneContents());u=f.innerHTML}}else typeof document.selection!="undefined"&&document.selection.type=="Text"&&(u=document.selection.createRange().htmlText);return{el:n,html:u}},prepareTagsStringForPlatform:function(n){for(var i=n.split(/[\s,#]+/),r=[],t=0;t<i.length;t++)i[t]!=""&&(i[t]="%23"+i[t],r.push(i[t]));return r.length>1?r.join(" "):r[0]},isArray:function(n){return Object.prototype.toString.apply(n)==="[object Array]"},decodeHTML:function(n){var t=document.createElement("div");return t.innerHTML=n,t.childNodes.length===0?"":t.childNodes[0].nodeValue},encodeHTML:function(n){return $("<div />").text(n).html()},Twitter:{regs:{hash:new RegExp(/ \#\w\w+\s?/g),link:new RegExp(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig),user:new RegExp(/(^|[^@\w])@(\w{1,15})\b/g)},urls:{hash:"https://twitter.com/search?q=%23",link:"self",user:"https://twitter.com/"},parseTweet:function(n){var u=n,t,i,r,f,e;n=n.extendedData.htmltweet;t=[];t.hashes=Utility.Twitter.parseRegexLinks(n,Utility.Twitter.regs.hash,Utility.Twitter.urls.hash);t.users=Utility.Twitter.parseRegexLinks(n,Utility.Twitter.regs.user,Utility.Twitter.urls.user);for(i in t)for(r in t[i])n=n.replace(r,t[i][r]);return f=Utility.Twitter.parseDate(u),e=Utility.Twitter.parseLink(u),"<div class='tweetItem'><div class='tweetMessage'>"+n+"<\/div><div class='tweetDate'><a href='"+e+"' target='_blank'>"+f+"<\/a><\/div><\/div>"},parseRegexLinks:function(n,t,r){var f=n.match(t),e;if(f===null)return!1;for(e=[],i=0;i<f.length;i++){var u=$.trim(f[i]),o=r=="self"?u:r+u.replace(/(\@|\#)/g,""),s="<a href='"+o+"' target=_null>"+u+"<\/a>";e[u]=s}return e},parseDate:function(n){var t=new Date(n.dateCreated);return Localizer.Format(Localizer.Time.monthabbrday,{monthabbr:Localizer.Time.MonthAbbr(t.getMonth()+1),day:t.getDate()})},parseLink:function(n){return"https://twitter.com/Bungie/status/"+n.extendedData.id}},distributeRangeForMin:function(n,t,i){var o=0,u,e,f,h,c,s;for(var r in n)o+=n[r];t>=1&&(t=t/100);u={};for(r in n)u[r]=n[r]/o;e=0;f=$.map(u,function(n,t){return t}).length;for(r in n)u[r]<t&&(e+=t-u[r],f--,u[r]=t);do{h=f;c=e/f;for(r in n)u[r]>t&&u[r]-c<t&&(e-=u[r]-t,f--,u[r]=t)}while(f!=h);if(f>0)for(r in n)u[r]>t&&(u[r]=u[r]-e/f);if(i==!0)return u;s={};for(r in n)s[r]=o*u[r];return s},distributeRatiosToMax:function(n,t){var t=typeof t=="undefined"?0:t,r=0,f=Number.MAX_VALUE,o=1-t,u,i,e;for(i in n)r=Math.max(r,n[i]),f=Math.min(f,n[i]);u={};for(i in n)e=n[i]/r*o+t,u[i]=e;return u},updateStatusText:function(n,t){var i={statusText:n};bungieNetPlatform.userService.UpdateUser(i,function(){$(".text_editStatusText").val(n);typeof t!="undefined"&&t()},function(n){Utility.alert(n.errorMessage+"("+n.errorCode+")")})},updateStatusTextEditDatetime:function(n,t){var i=".time",r=$(".editStatusText"),u=r.find(i);t!=""&&(u.attr("data-datetime",n),r.each(function(){var n=$(this),t=new CountUp(n,i,{timeUnits:{second:Localizer.Time.secondsletter,minute:Localizer.Time.minutesletter,hour:Localizer.Time.hoursletter,day:Localizer.Time.daysletter},pluralUnits:!1,timeSelector:i,isShortened:!0})}))},visibility:{getVisibilityBrowserPrefix:function(){var t,n,i;if("hidden"in document)return null;for(t=["moz","ms","o","webkit"],n=0;n<t.length;n++)if(i=t[n]+"Hidden",i in document)return t[n];return null},getHiddenProperty:function(){var n=Utility.visibility.getVisibilityBrowserPrefix();return n?n+"Hidden":"hidden"},getState:function(){var n=Utility.visibility.getVisibilityBrowserPrefix();return n?n+"VisibilityState":"visibilityState"},getVisibilityEvent:function(){var n=Utility.visibility.getVisibilityBrowserPrefix();return n?n+"visibilitychange":"visibilitychange"}},getYouTubeId:function(n){return n.match(/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/)?RegExp.$1:!1},youtubeUrlToIframe:function(n,t,i,r){var l="",o={width:typeof t!="undefined"?t:"auto",height:typeof i!="undefined"?i:"auto"},a,f,h,c;if(!n.match(/(youtube\.com|youtu\.be)/i))return"";if(n.toLowerCase().indexOf("playlist")==-1){var u=n,e,s={};u=n.indexOf("v=")>-1?n.replace(/^((?:https?:\/\/)?(?:(?:www|m)\.)?)(youtube\.com|youtu\.be)[\s\S]*?v=([0-9A-Za-z\_\-]+)((&[\s\S]+)|$)/i,"$1youtube.com/embed/$3"):n.replace(/^((?:https?:\/\/)?(?:(?:www|m)\.)?)(youtube\.com|youtu\.be)[\s\S]*\/([0-9A-Za-z\_\-]+)((&[\s\S]+)|$)/i,"$1youtube.com/embed/$3");u=u.replace("/m.","/www.");u.indexOf("?")>-1&&(s=Utility.parseQueryString(u),a=u.split("?"),u=a[0]);(n.indexOf("#t=")>-1||n.indexOf("?t=")>-1)&&(f=n.match(/[#|\?]t=((\d+m)?(\d+[s]?)?)/i),f.length>1&&(f=f[0].split("=")[1]),h=f.match("m")?f.split("m")[0]:0,c=h.length?f.split("m")[1].split("s")[0]:f.split("s")[0],e=parseInt(h*60)+parseInt(c?c:0));typeof s.start!="undefined"&&(e=s.start);window.location.protocol.indexOf("https")>-1&&u.indexOf("https")===-1&&(u=u.replace("http","https"));e&&(u=u+"?start="+e);var y=o.width=="auto"?"":"width='"+o.width+"' ",p=o.height=="auto"?"":"height='"+o.height+"' ",w=e?"&":"?",v="1";r&&(v="0");l="<iframe class='youtube-player' type='text/html' "+y+p+" src='"+u+w+"wmode=transparent&rel=0&fs=1&autoplay="+v+"' frameborder='0' allowfullscreen><\/iframe>"}return l},applyBanHistoryToElement:function(n,t){n.html(Localizer.Helptext.adminloadingdisciplinehistory);bungieNetPlatform.adminService.GetRecentDisciplineAndFlagHistoryForMember(t,7,function(t){for(var i,f,r="",u=0;u<t.length;u++)i=t[u],f=new Date(i.dateResolved),r+="<strong>"+f.toLocaleDateString()+" "+f.toLocaleTimeString()+"<\/strong>: "+Utility.getLocalizedReportResult(i.result)+" on a "+Utility.getLocalizedReportItemType(i.reportedItemType)+" for "+Localizer.Mute[i.reason],r+=i.banDurationInDays>0&&i.banDurationInDays<1e6?" ("+i.banDurationInDays+" day ban).<br />":".<br />";r===""&&(r=Localizer.Helptext.adminnodisciplinehistoryfound);n.html(r)},function(t){n.html(Localizer.Helptext.adminerrordisciplinehistory+" "+t.errorMessage)})},getLocalizedReportResult:function(n){var t="";switch(n){case Globals.ReportResolutionStatus.Unresolved:t=Localizer.Helptext.reportresolutionstatusunresolved;break;case Globals.ReportResolutionStatus.Innocent:t=Localizer.Helptext.reportresolutionstatusinnocent;break;case Globals.ReportResolutionStatus.GuiltyBan:t=Localizer.Helptext.reportresolutionstatusguiltyban;break;case Globals.ReportResolutionStatus.GuiltyBlastBan:t=Localizer.Helptext.reportresolutionstatusguiltyblastban;break;case Globals.ReportResolutionStatus.GuiltyWarn:t=Localizer.Helptext.reportresolutionstatusguiltywarn;break;case Globals.ReportResolutionStatus.GuiltyAlias:t=Localizer.Helptext.reportresolutionstatusguiltyalias;break;case Globals.ReportResolutionStatus.ResolveNoAction:t=Localizer.Helptext.reportresolutionstatusresolvenoaction;break;default:t=Localizer.Helptext.reportresolutionstatusunknown}return t},getLocalizedReportItemType:function(n){var t="";switch(n){case Globals.IgnoredItemType.Post:t=Localizer.Helptext.ignoreditemtypepost;break;case Globals.IgnoredItemType.Group:t=Localizer.Helptext.ignoreditemtypegroup;break;case Globals.IgnoredItemType.User:t=Localizer.Helptext.ignoreditemtypeuser;break;case Globals.IgnoredItemType.Tag:t=Localizer.Helptext.ignoreditemtypetag;break;case Globals.IgnoredItemType.GroupProfile:t=Localizer.Helptext.ignoreditemtypegroupprofile;break;case Globals.IgnoredItemType.UserProfile:t=Localizer.Helptext.ignoreditemtypeuserprofile;break;case Globals.IgnoredItemType.UserPrivateMessage:t=Localizer.Helptext.ignoreditemtypeuserprivatemessage;break;case Globals.IgnoredItemType.GroupWallPost:t=Localizer.Helptext.ignoreditemtypegroupwallpost;break;case Globals.IgnoredItemType.PrivateMessage:t=Localizer.Helptext.ignoreditemtypeprivatemessage;break;case Globals.IgnoredItemType.Fireteam:t=Localizer.Helptext.ignoreditemtypefireteam;break;default:t=Localizer.HelpText.ignoreditemtypeunknown}return t}};window.Utility="Proxy"in window&&location.href.match(".bng.local")?new Proxy(UtilityOld,{get:function(n,t){return Bnet.warn&&Bnet.warn("Detected use of deprecated 'Utility' object for function '"+t+"'. Use new TypeScript Bnet.Utilities classes instead."),n[t]}}):window.UtilityOld;window.matchMedia=window.matchMedia||function(n){"use strict";var u,i=n.documentElement,f=i.firstElementChild||i.firstChild,r=n.createElement("body"),t=n.createElement("div");return t.id="mq-test-1",t.style.cssText="position:absolute;top:-100em",r.style.background="none",r.appendChild(t),function(n){return t.innerHTML='&shy;<style media="'+n+'"> #mq-test-1 { width: 42px; }<\/style>',i.insertBefore(r,f),u=t.offsetWidth===42,i.removeChild(r),{matches:u,media:n}}}(document),function(n){var t;(function(n){var t,i;(function(n){n[n.required=0]="required";n[n.checked=1]="checked";n[n.allwhitespaces=2]="allwhitespaces";n[n.regex=3]="regex";n[n.email=4]="email";n[n.maxlength=5]="maxlength";n[n.minlength=6]="minlength";n[n.atleastone=7]="atleastone";n[n.httpurl=8]="httpurl";n[n.anyurl=9]="anyurl";n[n.custom=10]="custom"})(t=n.ValidationTypes||(n.ValidationTypes={}));i=function(){function n(){}return n.createValidationResult=function(n,t,i){return{isError:n,element:t,type:i}},n.validateRequired=function(n){var i=n.val(),r=$.trim(i)==="";return this.createValidationResult(r,n,t.required)},n.validateChecked=function(n){var i=n[0],r=!i.checked;return this.createValidationResult(r,n,t.checked)},n.validateAllWhitespaces=function(n){var i=n.val(),r=i!==""&&i.trim()==="";return this.createValidationResult(r,n,t.allwhitespaces)},n.validateRegex=function(n){var u=n.val(),f=n.data("regex"),e=n.data("regexFlags")||"g",r=n.data("regexInvert"),o=new RegExp(f,e),i=!o.test(u);return r!=undefined&&r&&(i=!i),this.createValidationResult(i,n,t.regex)},n.validateEmail=function(n){var i=n.val(),r=!/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(i);return this.createValidationResult(r,n,t.email)},n.validateHttpUrl=function(n){var i=n.val(),r=!1,u;return i.length>0&&(u=/^https?:\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.\(\)\!,@?^=%&amp;:\/~\+#]*[\w\-\@?^\!=%&amp;/~\+#])?$/i,r=!u.test(i)),this.createValidationResult(r,n,t.httpurl)},n.validateAnyUrl=function(n){var i=n.val(),r=!1,u;return i.length>0&&(u=/^[a-z][a-z0-9\-.+]*:\/?\/?([\w\-_\.]+)+([\w\-\.\(\)\!,@?^=%&amp;:\/~\+#]*[\w\-\@?^\!=%&amp;\/~\+#])?$/i,r=!u.test(i)),this.createValidationResult(r,n,t.anyurl)},n.validateMaxLength=function(n){var i=$.trim(n.val()),r=parseInt(n.attr("data-maxlength")||n.attr("maxlength")),u=i.length>0&&i.length>r;return this.createValidationResult(u,n,t.maxlength)},n.validateMinLength=function(n){var i=$.trim(n.val()),r=parseInt(n.attr("data-minlength")||n.attr("minlength")),u=i.length>0&&i.length<r;return this.createValidationResult(u,n,t.minlength)},n.validateAtLeastOne=function(n){var e=this,i=[],o=n.data("atleastone"),r=$("[data-atleastone='"+o+"']"),u=0,f;return r.each(function(n,t){var i=$(t);i.val().trim()!==""&&u++}),f=u===0,r.each(function(){i.push(e.createValidationResult(f,n,t.atleastone))}),i},n.getErrors=function(n){var i=this,t,r=[];return $.each(n,function(n,u){var f=$(u),e;f.length!==0&&(f.is("[data-required], :required")&&(t=i.validateRequired(f),t.isError&&r.push(t)),f.is("[data-checked]")&&(t=i.validateChecked(f),t.isError&&r.push(t)),f.is("[data-allwhitespaces]")&&(t=i.validateAllWhitespaces(f),t.isError&&r.push(t)),f.is("[data-regex]")&&(t=i.validateRegex(f),t.isError&&r.push(t)),f.is("[data-httpurl]")&&(t=i.validateHttpUrl(f),t.isError&&r.push(t)),f.is("[data-anyurl]")&&(t=i.validateAnyUrl(f),t.isError&&r.push(t)),f.is("[data-email]")&&(t=i.validateEmail(f),t.isError&&r.push(t)),f.is("[data-maxlength], [maxlength]")&&(t=i.validateMaxLength(f),t.isError&&r.push(t)),f.is("[data-minlength], [minlength]")&&(t=i.validateMinLength(f),t.isError&&r.push(t)),f.is("[data-atleastone]")&&(e=i.validateAtLeastOne(f),i.hasErrors(e)&&r.concat(e)))}),r},n.renderErrors=function(n){for(var r=function(){var f=n[i],c,o;if(f.isError){var r=f.element,l=t[f.type],e=r.parents(".form-kit"),s=e.length>0?e.find(".validation-errors"):null,h=r.attr("data-errorMessage-"+l);typeof f.customMessage!="undefined"&&f.customMessage!==""&&(h=f.customMessage);c=u.getCurrentErrorCountForElement(r);c<1&&(o=$('<p class="error">'+h+"<\/p>"),s?s.append(o):r.focus().before(o).addClass("has-error"),o.data("for",r));r.parent(".form-element").addClass("has-error");r.unbind(".validationcleanup");r.on("focus.validationcleanup click.validationcleanup change.validationcleanup",function(n){var t=$(n.currentTarget);t.closest(".form-element").removeClass("has-error");t.closest(".error").remove();t.prevAll(".error").remove();e&&e.find(".validation-errors").html("")})}},u=this,i=0,f=n.length;i<f;i++)r()},n.hasErrors=function(n){for(var r,t=0,i=n.length;t<i;t++)if(r=n[t],r.isError)return!0;return!1},n.getCurrentErrorCountForElement=function(n){var t=n.get(0);return $(".error").filter(function(n,i){return $(i).data("for").get(0)===t}).length},n.isValidUrl=function(n){var t=new RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$","i");return t.test(n)},n.isValidImageUrl=function(n){var t=new RegExp(".(jpeg|jpg|gif|png)$");return t.test(n)&&this.isValidUrl(n)},n}();n.Validation=i})(t=n.Utilities||(n.Utilities={}))}(Bnet||(Bnet={}))